
// 需要添加的plugins
plugins {
    id 'nu.studer.credentials' version '1.0.1'  // 用于在本地加密存储用户密码
}

apply plugin: 'com.android.library'

allprojects {
    repositories {
        jcenter()
        maven { url 'https://maven.fabric.io/public' }
        maven { url "https://s3.amazonaws.com/avocarrot-android-builds/dist" }
        maven {
            url "http://git.ihandysoft.com:8081/nexus/content/repositories/beta" // beta仓库
            credentials {
                username project.username // 使用之前配置的用户名
                password project.credentials."${project.username}" // 使用之前配置的密码
            }
        }
        maven {
            url "http://git.ihandysoft.com:8081/nexus/content/repositories/gm" // gm仓库
            credentials {
                username project.username
                password project.credentials."${project.username}"
            }
        }
        maven {
            url "http://git.ihandysoft.com:8081/nexus/content/repositories/thirdparty/"
            // thirdparty仓库
            credentials {
                username project.username
                password project.credentials."${project.username}"
            }
        }

        configurations.all {
            resolutionStrategy {
                cacheDynamicVersionsFor 0, 'seconds' // 确保gradle sync的时候总是会去拉取最新的积木版本。默认情况下gradle 每24小时才回去更新缓存
            }
        }

        flatDir {
            dirs '../libs'
        }

    }
}

android {
    compileSdkVersion 26
    buildToolsVersion "26.0.2"

    defaultConfig {
        minSdkVersion 14
        targetSdkVersion 21
        versionCode 1
        versionName "1.0"

        vectorDrawables.useSupportLibrary = true

        testInstrumentationRunner "android.support.test.runner.AndroidJUnitRunner"

    }
    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }
}

dependencies {
    compile fileTree(dir: 'libs', include: ['*.jar'])
    androidTestCompile('com.android.support.test.espresso:espresso-core:2.2.2', {
        exclude group: 'com.android.support', module: 'support-annotations'
    })
    testCompile 'junit:junit:4.12'

    compile(name: 'chargingscreen/libcharging', ext: 'aar')
    compile files('../libs/libFlashlight/libFlashlight.jar')

    compile 'com.android.support:appcompat-v7:25.3.1'
    compile 'com.android.support.constraint:constraint-layout:1.0.2'
    compile 'com.android.support:percent:25.3.1'
    compile 'com.github.bumptech.glide:glide:4.0.0'

    provided 'com.ihandy.appframework:libAppframework.gm:4.3.1.gm'
    provided 'com.ihandy.expressads:libExpressAds.gm:4.3.0.gm'
    provided 'com.ihandy.nativeads:libNativeAds.gm:4.4.0.gm'

}
